{"failedCount":0,"prefixedPath":"src\/test\/java\/FeatureFiles\/soapTest.feature","packageQualifiedName":"src.test.java.FeatureFiles.soapTest","loopIndex":-1,"relativePath":"src\/test\/java\/FeatureFiles\/soapTest.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":1108198,"millis":1.108198,"status":"passed"},"step":{"comments":["#    * url demoBaseUrl + '\/soap'","# this live url should work if you want to try this on your own"],"background":true,"line":6,"prefix":"*","index":0,"text":"url 'https:\/\/enathealthgate.nathealth.net:7002\/EClaimsWS\/services'"}},{"result":{"nanos":361994,"millis":0.361994,"status":"passed"},"step":{"line":9,"prefix":"Given","index":0,"text":"path '\/ClientManagement.ClientManagementHttpSoap12Endpoint\/'"}},{"result":{"nanos":34312501,"millis":34.312501,"status":"passed"},"step":{"line":10,"prefix":"And","index":1,"text":"def requestBody = read('soapRequest.xml')"}},{"result":{"nanos":1031734,"millis":1.031734,"status":"passed"},"step":{"line":11,"prefix":"And","index":2,"text":"request requestBody"}},{"result":{"nanos":15134695,"millis":15.134695,"status":"passed"},"step":{"comments":["#    And set requestBody\/Envelope\/Body\/registerClient\/registerClient\/adminKey = <adminKey>"],"line":13,"prefix":"And","index":3,"text":"set requestBody\/\/Body\/\/registerClient\/adminKey = \"Admin@1212\""}},{"result":{"nanos":2068445,"millis":2.068445,"status":"passed"},"step":{"line":14,"prefix":"And","index":4,"text":"set requestBody\/\/Body\/\/registerClient\/hcpId = 172"}},{"result":{"nanos":862145,"millis":0.862145,"status":"passed"},"step":{"line":15,"prefix":"*","index":5,"text":"def now = function(){ return java.lang.System.currentTimeMillis() }"}},{"result":{"nanos":9754080,"millis":9.75408,"status":"passed"},"step":{"line":16,"prefix":"*","index":6,"text":"def authKey = 'Test-' + now() + '-' + now()"}},{"result":{"nanos":1642438,"millis":1.642438,"status":"passed"},"step":{"line":17,"prefix":"And","index":7,"text":"set requestBody\/\/Body\/\/registerClient\/authKey = authKey"}},{"result":{"nanos":1391416,"millis":1.391416,"status":"passed"},"step":{"line":18,"prefix":"And","index":8,"text":"set requestBody\/\/Body\/\/registerClient\/publicKey = authKey"}},{"result":{"nanos":622296,"millis":0.622296,"status":"passed"},"step":{"comments":["#    And set requestBody\/\/Body\/\/registerClient\/id = <id> + now()","# soap is just an HTTP POST, so here we set the required header manually .."],"line":21,"prefix":"And","index":9,"text":"header Content-Type = 'application\/soap+xml; charset=utf-8'"}},{"result":{"nanos":590522369,"millis":590.522369,"status":"passed"},"step":{"comments":["# .. and then we use the 'method keyword' instead of 'soap action'"],"line":23,"prefix":"When","index":10,"text":"method post"},"stepLog":"17:12:05.052 request:\n1 > POST https:\/\/enathealthgate.nathealth.net:7002\/EClaimsWS\/services\/ClientManagement.ClientManagementHttpSoap12Endpoint\n1 > Content-Type: application\/soap+xml; charset=utf-8\n1 > Content-Length: 723\n1 > Host: enathealthgate.nathealth.net:7002\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/1.8.0_265)\n1 > Accept-Encoding: gzip,deflate\n<soap:Envelope xmlns:soap=\"http:\/\/www.w3.org\/2003\/05\/soap-envelope\" xmlns:ws=\"http:\/\/ws.eclaims.nathealth.com\" xmlns:xsd=\"http:\/\/req.ws.eclaims.nathealth.com\/xsd\">\n    <soap:Header\/>\n    <soap:Body>\n        <ws:registerClient>\n            <ws:registerClient>\n                <xsd:adminKey>Admin@1212<\/xsd:adminKey>\n                <xsd:authKey>Test-1638630724808-1638630724809<\/xsd:authKey>\n                <xsd:hcpId>172<\/xsd:hcpId>\n                <xsd:hcpMemberId\/>\n                <xsd:id>doctor172-33<\/xsd:id>\n                <xsd:publicKey>Test-1638630724808-1638630724809<\/xsd:publicKey>\n                <xsd:versionNo\/>\n            <\/ws:registerClient>\n        <\/ws:registerClient>\n    <\/soap:Body>\n<\/soap:Envelope>\n\n17:12:05.401 response time in milliseconds: 347\n1 < 200\n1 < Date: Sat, 04 Dec 2021 15:12:04 GMT\n1 < Server: Apache\n1 < X-Powered-By: Undertow\/1\n1 < Content-Type: application\/soap+xml; action=\"urn:registerClientResponse\";charset=utf-8\n1 < Vary: Accept-Encoding\n1 < Keep-Alive: timeout=15, max=100\n1 < Connection: Keep-Alive\n1 < Transfer-Encoding: chunked\n<?xml version='1.0' encoding='utf-8'?><soapenv:Envelope xmlns:soapenv=\"http:\/\/www.w3.org\/2003\/05\/soap-envelope\"><soapenv:Header\/><soapenv:Body><ns:registerClientResponse xmlns:ns=\"http:\/\/ws.eclaims.nathealth.com\"><ns:return xmlns:ax231=\"http:\/\/req.ws.eclaims.nathealth.com\/xsd\" xmlns:ax233=\"http:\/\/resp.ws.eclaims.nathealth.com\/xsd\" xmlns:ax234=\"http:\/\/common.ws.eclaims.nathealth.com\/xsd\" xmlns:ax237=\"http:\/\/dto.ws.nathealth.com\/xsd\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" xsi:type=\"ax233:RegisterClientResponse\"><ax233:errorCode>POS2221<\/ax233:errorCode><ax233:errorMsg>Device is already registered<\/ax233:errorMsg><ax233:success>false<\/ax233:success><ax233:visitFeeProcedures xsi:nil=\"true\"\/><\/ns:return><\/ns:registerClientResponse><\/soapenv:Body><\/soapenv:Envelope>\n"},{"result":{"nanos":18763,"millis":0.018763,"status":"passed"},"step":{"line":24,"prefix":"Then","index":11,"text":"status 200"}},{"result":{"nanos":1980766,"millis":1.980766,"status":"passed"},"step":{"comments":["# note how we focus only on the relevant part of the payload and read expected XML from a file","#    And match \/Envelope\/Body\/registerClientResponse\/return == read('soapExpected.xml')","#    And print response","#    * xml errorMessage = get response \/Envelope\/Body\/registerClientResponse\/return"],"line":29,"prefix":"*","index":12,"text":"def errorMessage = $response\/\/Body\/\/return\/errorMsg"}},{"result":{"nanos":6480923,"millis":6.480923,"status":"passed"},"step":{"comments":["#    And match \/Envelope\/Body\/registerClientResponse\/return\/errorMsg == <expected>","#    And print errorMessage"],"line":32,"prefix":"And","index":13,"text":"match errorMessage == \"Device is already registered\""}}],"line":37,"description":"","durationMillis":667.292763,"failed":false,"executorName":"main","name":"soap 1.2","startTime":1638630724513,"refId":"[1.1:37]","endTime":1638630725413,"exampleData":{"adminKey":"\"Admin@1212\"","authKey":"\"426d6608-4e36-4405-b59d-a0fb23311f11\"","hcpId":"172","hcpMemberId":"test","id":"\"doctor172-34\"","expected":"\"Device is already registered\""},"exampleIndex":0},{"sectionIndex":0,"stepResults":[{"result":{"nanos":536211,"millis":0.536211,"status":"passed"},"step":{"comments":["#    * url demoBaseUrl + '\/soap'","# this live url should work if you want to try this on your own"],"background":true,"line":6,"prefix":"*","index":0,"text":"url 'https:\/\/enathealthgate.nathealth.net:7002\/EClaimsWS\/services'"}},{"result":{"nanos":431855,"millis":0.431855,"status":"passed"},"step":{"line":9,"prefix":"Given","index":0,"text":"path '\/ClientManagement.ClientManagementHttpSoap12Endpoint\/'"}},{"result":{"nanos":2668018,"millis":2.668018,"status":"passed"},"step":{"line":10,"prefix":"And","index":1,"text":"def requestBody = read('soapRequest.xml')"}},{"result":{"nanos":155068,"millis":0.155068,"status":"passed"},"step":{"line":11,"prefix":"And","index":2,"text":"request requestBody"}},{"result":{"nanos":1688579,"millis":1.688579,"status":"passed"},"step":{"comments":["#    And set requestBody\/Envelope\/Body\/registerClient\/registerClient\/adminKey = <adminKey>"],"line":13,"prefix":"And","index":3,"text":"set requestBody\/\/Body\/\/registerClient\/adminKey = \"test\""}},{"result":{"nanos":1680648,"millis":1.680648,"status":"passed"},"step":{"line":14,"prefix":"And","index":4,"text":"set requestBody\/\/Body\/\/registerClient\/hcpId = 172"}},{"result":{"nanos":884739,"millis":0.884739,"status":"passed"},"step":{"line":15,"prefix":"*","index":5,"text":"def now = function(){ return java.lang.System.currentTimeMillis() }"}},{"result":{"nanos":1567302,"millis":1.567302,"status":"passed"},"step":{"line":16,"prefix":"*","index":6,"text":"def authKey = 'Test-' + now() + '-' + now()"}},{"result":{"nanos":1152225,"millis":1.152225,"status":"passed"},"step":{"line":17,"prefix":"And","index":7,"text":"set requestBody\/\/Body\/\/registerClient\/authKey = authKey"}},{"result":{"nanos":1028058,"millis":1.028058,"status":"passed"},"step":{"line":18,"prefix":"And","index":8,"text":"set requestBody\/\/Body\/\/registerClient\/publicKey = authKey"}},{"result":{"nanos":1060945,"millis":1.060945,"status":"passed"},"step":{"comments":["#    And set requestBody\/\/Body\/\/registerClient\/id = <id> + now()","# soap is just an HTTP POST, so here we set the required header manually .."],"line":21,"prefix":"And","index":9,"text":"header Content-Type = 'application\/soap+xml; charset=utf-8'"}},{"result":{"nanos":88231686,"millis":88.231686,"status":"passed"},"step":{"comments":["# .. and then we use the 'method keyword' instead of 'soap action'"],"line":23,"prefix":"When","index":10,"text":"method post"},"stepLog":"17:12:05.443 request:\n1 > POST https:\/\/enathealthgate.nathealth.net:7002\/EClaimsWS\/services\/ClientManagement.ClientManagementHttpSoap12Endpoint\n1 > Content-Type: application\/soap+xml; charset=utf-8\n1 > Content-Length: 717\n1 > Host: enathealthgate.nathealth.net:7002\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/1.8.0_265)\n1 > Accept-Encoding: gzip,deflate\n<soap:Envelope xmlns:soap=\"http:\/\/www.w3.org\/2003\/05\/soap-envelope\" xmlns:ws=\"http:\/\/ws.eclaims.nathealth.com\" xmlns:xsd=\"http:\/\/req.ws.eclaims.nathealth.com\/xsd\">\n    <soap:Header\/>\n    <soap:Body>\n        <ws:registerClient>\n            <ws:registerClient>\n                <xsd:adminKey>test<\/xsd:adminKey>\n                <xsd:authKey>Test-1638630725436-1638630725436<\/xsd:authKey>\n                <xsd:hcpId>172<\/xsd:hcpId>\n                <xsd:hcpMemberId\/>\n                <xsd:id>doctor172-33<\/xsd:id>\n                <xsd:publicKey>Test-1638630725436-1638630725436<\/xsd:publicKey>\n                <xsd:versionNo\/>\n            <\/ws:registerClient>\n        <\/ws:registerClient>\n    <\/soap:Body>\n<\/soap:Envelope>\n\n17:12:05.527 response time in milliseconds: 83\n1 < 200\n1 < Date: Sat, 04 Dec 2021 15:10:30 GMT\n1 < Server: Apache\n1 < X-Powered-By: Undertow\/1\n1 < Content-Type: application\/soap+xml; action=\"urn:registerClientResponse\";charset=utf-8\n1 < Vary: Accept-Encoding\n1 < Keep-Alive: timeout=15, max=100\n1 < Connection: Keep-Alive\n1 < Transfer-Encoding: chunked\n<?xml version='1.0' encoding='utf-8'?><soapenv:Envelope xmlns:soapenv=\"http:\/\/www.w3.org\/2003\/05\/soap-envelope\"><soapenv:Header\/><soapenv:Body><ns:registerClientResponse xmlns:ns=\"http:\/\/ws.eclaims.nathealth.com\"><ns:return xmlns:ax231=\"http:\/\/req.ws.eclaims.nathealth.com\/xsd\" xmlns:ax233=\"http:\/\/resp.ws.eclaims.nathealth.com\/xsd\" xmlns:ax234=\"http:\/\/common.ws.eclaims.nathealth.com\/xsd\" xmlns:ax237=\"http:\/\/dto.ws.nathealth.com\/xsd\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" xsi:type=\"ax233:RegisterClientResponse\"><ax233:errorCode>WS3021E<\/ax233:errorCode><ax233:errorMsg>Invalid admin key<\/ax233:errorMsg><ax233:success>false<\/ax233:success><ax233:visitFeeProcedures xsi:nil=\"true\"\/><\/ns:return><\/ns:registerClientResponse><\/soapenv:Body><\/soapenv:Envelope>\n"},{"result":{"nanos":6867,"millis":0.006867,"status":"passed"},"step":{"line":24,"prefix":"Then","index":11,"text":"status 200"}},{"result":{"nanos":727380,"millis":0.72738,"status":"passed"},"step":{"comments":["# note how we focus only on the relevant part of the payload and read expected XML from a file","#    And match \/Envelope\/Body\/registerClientResponse\/return == read('soapExpected.xml')","#    And print response","#    * xml errorMessage = get response \/Envelope\/Body\/registerClientResponse\/return"],"line":29,"prefix":"*","index":12,"text":"def errorMessage = $response\/\/Body\/\/return\/errorMsg"}},{"result":{"nanos":654599,"millis":0.654599,"status":"passed"},"step":{"comments":["#    And match \/Envelope\/Body\/registerClientResponse\/return\/errorMsg == <expected>","#    And print errorMessage"],"line":32,"prefix":"And","index":13,"text":"match errorMessage == \"Invalid admin key\""}}],"line":42,"description":"","durationMillis":102.47418,"failed":false,"tags":["testTag"],"executorName":"main","name":"soap 1.2","startTime":1638630725421,"refId":"[1.1:42]","endTime":1638630725530,"exampleData":{"adminKey":"\"test\"","authKey":"\"426d6608-4e36-4405-b59d-a0fb23311f11\"","hcpId":"172","hcpMemberId":"test","id":"\"doctor172-34\"","expected":"\"Invalid admin key\""},"exampleIndex":0}],"callDepth":0,"name":"test soap end point","description":"","resultDate":"2021-12-04 05:12:05 PM","durationMillis":769.766943,"passedCount":2}
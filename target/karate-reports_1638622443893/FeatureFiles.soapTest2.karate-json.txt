{"failedCount":0,"prefixedPath":"classpath:FeatureFiles\/soapTest2.feature","packageQualifiedName":"FeatureFiles.soapTest2","loopIndex":-1,"relativePath":"FeatureFiles\/soapTest2.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":425530,"millis":0.42553,"status":"passed"},"step":{"comments":["#    * url demoBaseUrl + '\/soap'","# this live url should work if you want to try this on your own"],"background":true,"line":6,"prefix":"*","index":0,"text":"url 'https:\/\/enathealthgate.nathealth.net:7002\/EClaimsWS\/services'"}},{"result":{"nanos":264708,"millis":0.264708,"status":"passed"},"step":{"line":9,"prefix":"Given","index":0,"text":"path '\/ClientManagement.ClientManagementHttpSoap12Endpoint\/'"}},{"result":{"nanos":3128910,"millis":3.12891,"status":"passed"},"step":{"line":10,"prefix":"And","index":1,"text":"def requestBody = read('soapRequest.xml')"}},{"result":{"nanos":75342,"millis":0.075342,"status":"passed"},"step":{"line":11,"prefix":"And","index":2,"text":"request requestBody"}},{"result":{"nanos":1199731,"millis":1.199731,"status":"passed"},"step":{"comments":["#    And set requestBody\/Envelope\/Body\/registerClient\/registerClient\/adminKey = <adminKey>"],"line":13,"prefix":"And","index":3,"text":"set requestBody\/\/Body\/\/registerClient\/adminKey = \"test\""}},{"result":{"nanos":1111830,"millis":1.11183,"status":"passed"},"step":{"line":14,"prefix":"And","index":4,"text":"set requestBody\/\/Body\/\/registerClient\/hcpId = 172"}},{"result":{"nanos":514005,"millis":0.514005,"status":"passed"},"step":{"line":15,"prefix":"*","index":5,"text":"def now = function(){ return java.lang.System.currentTimeMillis() }"}},{"result":{"nanos":1224245,"millis":1.224245,"status":"passed"},"step":{"line":16,"prefix":"*","index":6,"text":"def authKey = 'Test-' + now() + '-' + now()"}},{"result":{"nanos":784617,"millis":0.784617,"status":"passed"},"step":{"line":17,"prefix":"And","index":7,"text":"set requestBody\/\/Body\/\/registerClient\/authKey = authKey"}},{"result":{"nanos":732652,"millis":0.732652,"status":"passed"},"step":{"line":18,"prefix":"And","index":8,"text":"set requestBody\/\/Body\/\/registerClient\/publicKey = authKey"}},{"result":{"nanos":392216,"millis":0.392216,"status":"passed"},"step":{"comments":["#    And set requestBody\/\/Body\/\/registerClient\/id = <id> + now()","# soap is just an HTTP POST, so here we set the required header manually .."],"line":21,"prefix":"And","index":9,"text":"header Content-Type = 'application\/soap+xml; charset=utf-8'"}},{"result":{"nanos":193594341,"millis":193.594341,"status":"passed"},"step":{"comments":["# .. and then we use the 'method keyword' instead of 'soap action'"],"line":23,"prefix":"When","index":10,"text":"method post"},"stepLog":"13:19:00.533 request:\n1 > POST https:\/\/enathealthgate.nathealth.net:7002\/EClaimsWS\/services\/ClientManagement.ClientManagementHttpSoap12Endpoint\n1 > Content-Type: application\/soap+xml; charset=utf-8\n1 > Content-Length: 717\n1 > Host: enathealthgate.nathealth.net:7002\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/1.8.0_301)\n1 > Accept-Encoding: gzip,deflate\n<soap:Envelope xmlns:soap=\"http:\/\/www.w3.org\/2003\/05\/soap-envelope\" xmlns:ws=\"http:\/\/ws.eclaims.nathealth.com\" xmlns:xsd=\"http:\/\/req.ws.eclaims.nathealth.com\/xsd\">\n    <soap:Header\/>\n    <soap:Body>\n        <ws:registerClient>\n            <ws:registerClient>\n                <xsd:adminKey>test<\/xsd:adminKey>\n                <xsd:authKey>Test-1638616740528-1638616740529<\/xsd:authKey>\n                <xsd:hcpId>172<\/xsd:hcpId>\n                <xsd:hcpMemberId\/>\n                <xsd:id>doctor172-33<\/xsd:id>\n                <xsd:publicKey>Test-1638616740528-1638616740529<\/xsd:publicKey>\n                <xsd:versionNo\/>\n            <\/ws:registerClient>\n        <\/ws:registerClient>\n    <\/soap:Body>\n<\/soap:Envelope>\n\n13:19:00.723 response time in milliseconds: 189\n1 < 200\n1 < Date: Sat, 04 Dec 2021 11:17:25 GMT\n1 < Server: Apache\n1 < X-Powered-By: Undertow\/1\n1 < Content-Type: application\/soap+xml; action=\"urn:registerClientResponse\";charset=utf-8\n1 < Vary: Accept-Encoding\n1 < Keep-Alive: timeout=15, max=100\n1 < Connection: Keep-Alive\n1 < Transfer-Encoding: chunked\n<?xml version='1.0' encoding='utf-8'?><soapenv:Envelope xmlns:soapenv=\"http:\/\/www.w3.org\/2003\/05\/soap-envelope\"><soapenv:Header\/><soapenv:Body><ns:registerClientResponse xmlns:ns=\"http:\/\/ws.eclaims.nathealth.com\"><ns:return xmlns:ax231=\"http:\/\/req.ws.eclaims.nathealth.com\/xsd\" xmlns:ax233=\"http:\/\/resp.ws.eclaims.nathealth.com\/xsd\" xmlns:ax234=\"http:\/\/common.ws.eclaims.nathealth.com\/xsd\" xmlns:ax237=\"http:\/\/dto.ws.nathealth.com\/xsd\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" xsi:type=\"ax233:RegisterClientResponse\"><ax233:errorCode>WS3021E<\/ax233:errorCode><ax233:errorMsg>Invalid admin key<\/ax233:errorMsg><ax233:success>false<\/ax233:success><ax233:visitFeeProcedures xsi:nil=\"true\"\/><\/ns:return><\/ns:registerClientResponse><\/soapenv:Body><\/soapenv:Envelope>\n"},{"result":{"nanos":5571,"millis":0.005571,"status":"passed"},"step":{"line":24,"prefix":"Then","index":11,"text":"status 200"}},{"result":{"nanos":721564,"millis":0.721564,"status":"passed"},"step":{"comments":["# note how we focus only on the relevant part of the payload and read expected XML from a file","#    And match \/Envelope\/Body\/registerClientResponse\/return == read('soapExpected.xml')","#    And print response","#    * xml errorMessage = get response \/Envelope\/Body\/registerClientResponse\/return"],"line":29,"prefix":"*","index":12,"text":"def errorMessage = $response\/\/Body\/\/return\/errorMsg"}},{"result":{"nanos":348532,"millis":0.348532,"status":"passed"},"step":{"comments":["#    And match \/Envelope\/Body\/registerClientResponse\/return\/errorMsg == <expected>","#    And print errorMessage"],"line":32,"prefix":"And","index":13,"text":"match errorMessage == \"Invalid admin key\""}}],"line":42,"description":"","durationMillis":204.523794,"failed":false,"tags":["testTag"],"executorName":"main","name":"soap 1.2","startTime":1638616740518,"refId":"[1.1:42]","endTime":1638616740726,"exampleData":{"adminKey":"\"test\"","authKey":"\"426d6608-4e36-4405-b59d-a0fb23311f11\"","hcpId":"172","hcpMemberId":"test","id":"\"doctor172-34\"","expected":"\"Invalid admin key\""},"exampleIndex":0}],"callDepth":0,"name":"test soap end point 2","description":"","resultDate":"2021-12-04 01:19:00 PM","durationMillis":204.523794,"passedCount":1}
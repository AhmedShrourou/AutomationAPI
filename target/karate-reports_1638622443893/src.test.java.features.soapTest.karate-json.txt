{"failedCount":0,"prefixedPath":"src\/test\/java\/features\/soapTest.feature","packageQualifiedName":"src.test.java.features.soapTest","loopIndex":-1,"relativePath":"src\/test\/java\/features\/soapTest.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":57796298,"millis":57.796298,"status":"passed"},"step":{"comments":["#    * url demoBaseUrl + '\/soap'","# this live url should work if you want to try this on your own"],"background":true,"line":6,"prefix":"*","index":0,"text":"url 'https:\/\/enathealthgate.nathealth.net:7002\/EClaimsWS\/services'"}},{"result":{"nanos":1071041,"millis":1.071041,"status":"passed"},"step":{"line":9,"prefix":"Given","index":0,"text":"path '\/ClientManagement.ClientManagementHttpSoap12Endpoint\/'"}},{"result":{"nanos":71582854,"millis":71.582854,"status":"passed"},"step":{"line":10,"prefix":"And","index":1,"text":"def requestBody = read('soapRequest.xml')"}},{"result":{"nanos":8398752,"millis":8.398752,"status":"passed"},"step":{"line":11,"prefix":"And","index":2,"text":"request requestBody"}},{"result":{"nanos":13514014,"millis":13.514014,"status":"passed"},"step":{"comments":["#    And set requestBody\/Envelope\/Body\/registerClient\/registerClient\/adminKey = <adminKey>"],"line":13,"prefix":"And","index":3,"text":"set requestBody\/\/Body\/\/registerClient\/adminKey = \"Admin@1212\""}},{"result":{"nanos":2612115,"millis":2.612115,"status":"passed"},"step":{"line":14,"prefix":"And","index":4,"text":"set requestBody\/\/Body\/\/registerClient\/hcpId = 172"}},{"result":{"nanos":5801244,"millis":5.801244,"status":"passed"},"step":{"line":15,"prefix":"*","index":5,"text":"def now = function(){ return java.lang.System.currentTimeMillis() }"}},{"result":{"nanos":20769890,"millis":20.76989,"status":"passed"},"step":{"line":16,"prefix":"*","index":6,"text":"def authKey = 'Test-' + now() + '-' + now()"}},{"result":{"nanos":1310010,"millis":1.31001,"status":"passed"},"step":{"line":17,"prefix":"And","index":7,"text":"set requestBody\/\/Body\/\/registerClient\/authKey = authKey"}},{"result":{"nanos":979678,"millis":0.979678,"status":"passed"},"step":{"line":18,"prefix":"And","index":8,"text":"set requestBody\/\/Body\/\/registerClient\/publicKey = authKey"}},{"result":{"nanos":436244,"millis":0.436244,"status":"passed"},"step":{"comments":["#    And set requestBody\/\/Body\/\/registerClient\/id = <id> + now()","# soap is just an HTTP POST, so here we set the required header manually .."],"line":21,"prefix":"And","index":9,"text":"header Content-Type = 'application\/soap+xml; charset=utf-8'"}},{"result":{"nanos":818908149,"millis":818.908149,"status":"passed"},"step":{"comments":["# .. and then we use the 'method keyword' instead of 'soap action'"],"line":23,"prefix":"When","index":10,"text":"method post"},"stepLog":"12:57:57.153 request:\n1 > POST https:\/\/enathealthgate.nathealth.net:7002\/EClaimsWS\/services\/ClientManagement.ClientManagementHttpSoap12Endpoint\n1 > Content-Type: application\/soap+xml; charset=utf-8\n1 > Content-Length: 723\n1 > Host: enathealthgate.nathealth.net:7002\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/1.8.0_301)\n1 > Accept-Encoding: gzip,deflate\n<soap:Envelope xmlns:soap=\"http:\/\/www.w3.org\/2003\/05\/soap-envelope\" xmlns:ws=\"http:\/\/ws.eclaims.nathealth.com\" xmlns:xsd=\"http:\/\/req.ws.eclaims.nathealth.com\/xsd\">\n    <soap:Header\/>\n    <soap:Body>\n        <ws:registerClient>\n            <ws:registerClient>\n                <xsd:adminKey>Admin@1212<\/xsd:adminKey>\n                <xsd:authKey>Test-1638615476859-1638615476861<\/xsd:authKey>\n                <xsd:hcpId>172<\/xsd:hcpId>\n                <xsd:hcpMemberId\/>\n                <xsd:id>doctor172-33<\/xsd:id>\n                <xsd:publicKey>Test-1638615476859-1638615476861<\/xsd:publicKey>\n                <xsd:versionNo\/>\n            <\/ws:registerClient>\n        <\/ws:registerClient>\n    <\/soap:Body>\n<\/soap:Envelope>\n\n12:57:57.681 response time in milliseconds: 527\n1 < 200\n1 < Date: Sat, 04 Dec 2021 10:56:22 GMT\n1 < Server: Apache\n1 < X-Powered-By: Undertow\/1\n1 < Content-Type: application\/soap+xml; action=\"urn:registerClientResponse\";charset=utf-8\n1 < Vary: Accept-Encoding\n1 < Keep-Alive: timeout=15, max=100\n1 < Connection: Keep-Alive\n1 < Transfer-Encoding: chunked\n<?xml version='1.0' encoding='utf-8'?><soapenv:Envelope xmlns:soapenv=\"http:\/\/www.w3.org\/2003\/05\/soap-envelope\"><soapenv:Header\/><soapenv:Body><ns:registerClientResponse xmlns:ns=\"http:\/\/ws.eclaims.nathealth.com\"><ns:return xmlns:ax231=\"http:\/\/req.ws.eclaims.nathealth.com\/xsd\" xmlns:ax233=\"http:\/\/resp.ws.eclaims.nathealth.com\/xsd\" xmlns:ax234=\"http:\/\/common.ws.eclaims.nathealth.com\/xsd\" xmlns:ax237=\"http:\/\/dto.ws.nathealth.com\/xsd\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" xsi:type=\"ax233:RegisterClientResponse\"><ax233:errorCode>POS2221<\/ax233:errorCode><ax233:errorMsg>Device is already registered<\/ax233:errorMsg><ax233:success>false<\/ax233:success><ax233:visitFeeProcedures xsi:nil=\"true\"\/><\/ns:return><\/ns:registerClientResponse><\/soapenv:Body><\/soapenv:Envelope>\n"},{"result":{"nanos":11411,"millis":0.011411,"status":"passed"},"step":{"line":24,"prefix":"Then","index":11,"text":"status 200"}},{"result":{"nanos":1423051,"millis":1.423051,"status":"passed"},"step":{"comments":["# note how we focus only on the relevant part of the payload and read expected XML from a file","#    And match \/Envelope\/Body\/registerClientResponse\/return == read('soapExpected.xml')","#    And print response","#    * xml errorMessage = get response \/Envelope\/Body\/registerClientResponse\/return"],"line":29,"prefix":"*","index":12,"text":"def errorMessage = $response\/\/Body\/\/return\/errorMsg"}},{"result":{"nanos":5961754,"millis":5.961754,"status":"passed"},"step":{"comments":["#    And match \/Envelope\/Body\/registerClientResponse\/return\/errorMsg == <expected>","#    And print errorMessage"],"line":32,"prefix":"And","index":13,"text":"match errorMessage == \"Device is already registered\""}}],"line":37,"description":"","durationMillis":1010.576505,"failed":false,"executorName":"main","name":"soap 1.2","startTime":1638615476667,"refId":"[1.1:37]","endTime":1638615477691,"exampleData":{"adminKey":"\"Admin@1212\"","authKey":"\"426d6608-4e36-4405-b59d-a0fb23311f11\"","hcpId":"172","hcpMemberId":"test","id":"\"doctor172-34\"","expected":"\"Device is already registered\""},"exampleIndex":0},{"sectionIndex":0,"stepResults":[{"result":{"nanos":403074,"millis":0.403074,"status":"passed"},"step":{"comments":["#    * url demoBaseUrl + '\/soap'","# this live url should work if you want to try this on your own"],"background":true,"line":6,"prefix":"*","index":0,"text":"url 'https:\/\/enathealthgate.nathealth.net:7002\/EClaimsWS\/services'"}},{"result":{"nanos":252163,"millis":0.252163,"status":"passed"},"step":{"line":9,"prefix":"Given","index":0,"text":"path '\/ClientManagement.ClientManagementHttpSoap12Endpoint\/'"}},{"result":{"nanos":2815511,"millis":2.815511,"status":"passed"},"step":{"line":10,"prefix":"And","index":1,"text":"def requestBody = read('soapRequest.xml')"}},{"result":{"nanos":70761,"millis":0.070761,"status":"passed"},"step":{"line":11,"prefix":"And","index":2,"text":"request requestBody"}},{"result":{"nanos":1084228,"millis":1.084228,"status":"passed"},"step":{"comments":["#    And set requestBody\/Envelope\/Body\/registerClient\/registerClient\/adminKey = <adminKey>"],"line":13,"prefix":"And","index":3,"text":"set requestBody\/\/Body\/\/registerClient\/adminKey = \"test\""}},{"result":{"nanos":965295,"millis":0.965295,"status":"passed"},"step":{"line":14,"prefix":"And","index":4,"text":"set requestBody\/\/Body\/\/registerClient\/hcpId = 172"}},{"result":{"nanos":604019,"millis":0.604019,"status":"passed"},"step":{"line":15,"prefix":"*","index":5,"text":"def now = function(){ return java.lang.System.currentTimeMillis() }"}},{"result":{"nanos":2255016,"millis":2.255016,"status":"passed"},"step":{"line":16,"prefix":"*","index":6,"text":"def authKey = 'Test-' + now() + '-' + now()"}},{"result":{"nanos":806341,"millis":0.806341,"status":"passed"},"step":{"line":17,"prefix":"And","index":7,"text":"set requestBody\/\/Body\/\/registerClient\/authKey = authKey"}},{"result":{"nanos":679108,"millis":0.679108,"status":"passed"},"step":{"line":18,"prefix":"And","index":8,"text":"set requestBody\/\/Body\/\/registerClient\/publicKey = authKey"}},{"result":{"nanos":376982,"millis":0.376982,"status":"passed"},"step":{"comments":["#    And set requestBody\/\/Body\/\/registerClient\/id = <id> + now()","# soap is just an HTTP POST, so here we set the required header manually .."],"line":21,"prefix":"And","index":9,"text":"header Content-Type = 'application\/soap+xml; charset=utf-8'"}},{"result":{"nanos":196224228,"millis":196.224228,"status":"passed"},"step":{"comments":["# .. and then we use the 'method keyword' instead of 'soap action'"],"line":23,"prefix":"When","index":10,"text":"method post"},"stepLog":"12:57:57.709 request:\n1 > POST https:\/\/enathealthgate.nathealth.net:7002\/EClaimsWS\/services\/ClientManagement.ClientManagementHttpSoap12Endpoint\n1 > Content-Type: application\/soap+xml; charset=utf-8\n1 > Content-Length: 717\n1 > Host: enathealthgate.nathealth.net:7002\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/1.8.0_301)\n1 > Accept-Encoding: gzip,deflate\n<soap:Envelope xmlns:soap=\"http:\/\/www.w3.org\/2003\/05\/soap-envelope\" xmlns:ws=\"http:\/\/ws.eclaims.nathealth.com\" xmlns:xsd=\"http:\/\/req.ws.eclaims.nathealth.com\/xsd\">\n    <soap:Header\/>\n    <soap:Body>\n        <ws:registerClient>\n            <ws:registerClient>\n                <xsd:adminKey>test<\/xsd:adminKey>\n                <xsd:authKey>Test-1638615477706-1638615477706<\/xsd:authKey>\n                <xsd:hcpId>172<\/xsd:hcpId>\n                <xsd:hcpMemberId\/>\n                <xsd:id>doctor172-33<\/xsd:id>\n                <xsd:publicKey>Test-1638615477706-1638615477706<\/xsd:publicKey>\n                <xsd:versionNo\/>\n            <\/ws:registerClient>\n        <\/ws:registerClient>\n    <\/soap:Body>\n<\/soap:Envelope>\n\n12:57:57.903 response time in milliseconds: 194\n1 < 200\n1 < Date: Sat, 04 Dec 2021 10:57:57 GMT\n1 < Server: Apache\n1 < X-Powered-By: Undertow\/1\n1 < Content-Type: application\/soap+xml; action=\"urn:registerClientResponse\";charset=utf-8\n1 < Vary: Accept-Encoding\n1 < Keep-Alive: timeout=15, max=100\n1 < Connection: Keep-Alive\n1 < Transfer-Encoding: chunked\n<?xml version='1.0' encoding='utf-8'?><soapenv:Envelope xmlns:soapenv=\"http:\/\/www.w3.org\/2003\/05\/soap-envelope\"><soapenv:Header\/><soapenv:Body><ns:registerClientResponse xmlns:ns=\"http:\/\/ws.eclaims.nathealth.com\"><ns:return xmlns:ax231=\"http:\/\/req.ws.eclaims.nathealth.com\/xsd\" xmlns:ax233=\"http:\/\/resp.ws.eclaims.nathealth.com\/xsd\" xmlns:ax234=\"http:\/\/common.ws.eclaims.nathealth.com\/xsd\" xmlns:ax237=\"http:\/\/dto.ws.nathealth.com\/xsd\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" xsi:type=\"ax233:RegisterClientResponse\"><ax233:errorCode>WS3021E<\/ax233:errorCode><ax233:errorMsg>Invalid admin key<\/ax233:errorMsg><ax233:success>false<\/ax233:success><ax233:visitFeeProcedures xsi:nil=\"true\"\/><\/ns:return><\/ns:registerClientResponse><\/soapenv:Body><\/soapenv:Envelope>\n"},{"result":{"nanos":5754,"millis":0.005754,"status":"passed"},"step":{"line":24,"prefix":"Then","index":11,"text":"status 200"}},{"result":{"nanos":704127,"millis":0.704127,"status":"passed"},"step":{"comments":["# note how we focus only on the relevant part of the payload and read expected XML from a file","#    And match \/Envelope\/Body\/registerClientResponse\/return == read('soapExpected.xml')","#    And print response","#    * xml errorMessage = get response \/Envelope\/Body\/registerClientResponse\/return"],"line":29,"prefix":"*","index":12,"text":"def errorMessage = $response\/\/Body\/\/return\/errorMsg"}},{"result":{"nanos":563772,"millis":0.563772,"status":"passed"},"step":{"comments":["#    And match \/Envelope\/Body\/registerClientResponse\/return\/errorMsg == <expected>","#    And print errorMessage"],"line":32,"prefix":"And","index":13,"text":"match errorMessage == \"Invalid admin key\""}}],"line":38,"description":"","durationMillis":207.810379,"failed":false,"executorName":"main","name":"soap 1.2","startTime":1638615477697,"refId":"[1.2:38]","endTime":1638615477906,"exampleData":{"adminKey":"\"test\"","authKey":"\"426d6608-4e36-4405-b59d-a0fb23311f11\"","hcpId":"172","hcpMemberId":"test","id":"\"doctor172-34\"","expected":"\"Invalid admin key\""},"exampleIndex":1}],"callDepth":0,"name":"test soap end point","description":"","resultDate":"2021-12-04 12:57:57 PM","durationMillis":1218.386884,"passedCount":2}
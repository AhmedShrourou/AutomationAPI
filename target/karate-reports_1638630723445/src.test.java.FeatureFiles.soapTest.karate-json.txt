{"failedCount":0,"prefixedPath":"src\/test\/java\/FeatureFiles\/soapTest.feature","packageQualifiedName":"src.test.java.FeatureFiles.soapTest","loopIndex":-1,"relativePath":"src\/test\/java\/FeatureFiles\/soapTest.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":1121887,"millis":1.121887,"status":"passed"},"step":{"comments":["#    * url demoBaseUrl + '\/soap'","# this live url should work if you want to try this on your own"],"background":true,"line":6,"prefix":"*","index":0,"text":"url 'https:\/\/enathealthgate.nathealth.net:7002\/EClaimsWS\/services'"}},{"result":{"nanos":433720,"millis":0.43372,"status":"passed"},"step":{"line":9,"prefix":"Given","index":0,"text":"path '\/ClientManagement.ClientManagementHttpSoap12Endpoint\/'"}},{"result":{"nanos":88874096,"millis":88.874096,"status":"passed"},"step":{"line":10,"prefix":"And","index":1,"text":"def requestBody = read('soapRequest.xml')"}},{"result":{"nanos":1504306,"millis":1.504306,"status":"passed"},"step":{"line":11,"prefix":"And","index":2,"text":"request requestBody"}},{"result":{"nanos":109393853,"millis":109.393853,"status":"passed"},"step":{"comments":["#    And set requestBody\/Envelope\/Body\/registerClient\/registerClient\/adminKey = <adminKey>"],"line":13,"prefix":"And","index":3,"text":"set requestBody\/\/Body\/\/registerClient\/adminKey = \"Admin@1212\""}},{"result":{"nanos":3121161,"millis":3.121161,"status":"passed"},"step":{"line":14,"prefix":"And","index":4,"text":"set requestBody\/\/Body\/\/registerClient\/hcpId = 172"}},{"result":{"nanos":1824149,"millis":1.824149,"status":"passed"},"step":{"line":15,"prefix":"*","index":5,"text":"def now = function(){ return java.lang.System.currentTimeMillis() }"}},{"result":{"nanos":10888489,"millis":10.888489,"status":"passed"},"step":{"line":16,"prefix":"*","index":6,"text":"def authKey = 'Test-' + now() + '-' + now()"}},{"result":{"nanos":1792566,"millis":1.792566,"status":"passed"},"step":{"line":17,"prefix":"And","index":7,"text":"set requestBody\/\/Body\/\/registerClient\/authKey = authKey"}},{"result":{"nanos":1684714,"millis":1.684714,"status":"passed"},"step":{"line":18,"prefix":"And","index":8,"text":"set requestBody\/\/Body\/\/registerClient\/publicKey = authKey"}},{"result":{"nanos":1759117,"millis":1.759117,"status":"passed"},"step":{"comments":["#    And set requestBody\/\/Body\/\/registerClient\/id = <id> + now()","# soap is just an HTTP POST, so here we set the required header manually .."],"line":21,"prefix":"And","index":9,"text":"header Content-Type = 'application\/soap+xml; charset=utf-8'"}},{"result":{"nanos":887228662,"millis":887.228662,"status":"passed"},"step":{"comments":["# .. and then we use the 'method keyword' instead of 'soap action'"],"line":23,"prefix":"When","index":10,"text":"method post"},"stepLog":"14:54:05.609 request:\n1 > POST https:\/\/enathealthgate.nathealth.net:7002\/EClaimsWS\/services\/ClientManagement.ClientManagementHttpSoap12Endpoint\n1 > Content-Type: application\/soap+xml; charset=utf-8\n1 > Content-Length: 723\n1 > Host: enathealthgate.nathealth.net:7002\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/1.8.0_265)\n1 > Accept-Encoding: gzip,deflate\n<soap:Envelope xmlns:soap=\"http:\/\/www.w3.org\/2003\/05\/soap-envelope\" xmlns:ws=\"http:\/\/ws.eclaims.nathealth.com\" xmlns:xsd=\"http:\/\/req.ws.eclaims.nathealth.com\/xsd\">\n    <soap:Header\/>\n    <soap:Body>\n        <ws:registerClient>\n            <ws:registerClient>\n                <xsd:adminKey>Admin@1212<\/xsd:adminKey>\n                <xsd:authKey>Test-1638622445111-1638622445113<\/xsd:authKey>\n                <xsd:hcpId>172<\/xsd:hcpId>\n                <xsd:hcpMemberId\/>\n                <xsd:id>doctor172-33<\/xsd:id>\n                <xsd:publicKey>Test-1638622445111-1638622445113<\/xsd:publicKey>\n                <xsd:versionNo\/>\n            <\/ws:registerClient>\n        <\/ws:registerClient>\n    <\/soap:Body>\n<\/soap:Envelope>\n\n14:54:06.004 response time in milliseconds: 393\n1 < 200\n1 < Date: Sat, 04 Dec 2021 12:54:05 GMT\n1 < Server: Apache\n1 < X-Powered-By: Undertow\/1\n1 < Content-Type: application\/soap+xml; action=\"urn:registerClientResponse\";charset=utf-8\n1 < Vary: Accept-Encoding\n1 < Keep-Alive: timeout=15, max=100\n1 < Connection: Keep-Alive\n1 < Transfer-Encoding: chunked\n<?xml version='1.0' encoding='utf-8'?><soapenv:Envelope xmlns:soapenv=\"http:\/\/www.w3.org\/2003\/05\/soap-envelope\"><soapenv:Header\/><soapenv:Body><ns:registerClientResponse xmlns:ns=\"http:\/\/ws.eclaims.nathealth.com\"><ns:return xmlns:ax231=\"http:\/\/req.ws.eclaims.nathealth.com\/xsd\" xmlns:ax233=\"http:\/\/resp.ws.eclaims.nathealth.com\/xsd\" xmlns:ax234=\"http:\/\/common.ws.eclaims.nathealth.com\/xsd\" xmlns:ax237=\"http:\/\/dto.ws.nathealth.com\/xsd\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" xsi:type=\"ax233:RegisterClientResponse\"><ax233:errorCode>POS2221<\/ax233:errorCode><ax233:errorMsg>Device is already registered<\/ax233:errorMsg><ax233:success>false<\/ax233:success><ax233:visitFeeProcedures xsi:nil=\"true\"\/><\/ns:return><\/ns:registerClientResponse><\/soapenv:Body><\/soapenv:Envelope>\n"},{"result":{"nanos":13416,"millis":0.013416,"status":"passed"},"step":{"line":24,"prefix":"Then","index":11,"text":"status 200"}},{"result":{"nanos":1677559,"millis":1.677559,"status":"passed"},"step":{"comments":["# note how we focus only on the relevant part of the payload and read expected XML from a file","#    And match \/Envelope\/Body\/registerClientResponse\/return == read('soapExpected.xml')","#    And print response","#    * xml errorMessage = get response \/Envelope\/Body\/registerClientResponse\/return"],"line":29,"prefix":"*","index":12,"text":"def errorMessage = $response\/\/Body\/\/return\/errorMsg"}},{"result":{"nanos":7352006,"millis":7.352006,"status":"passed"},"step":{"comments":["#    And match \/Envelope\/Body\/registerClientResponse\/return\/errorMsg == <expected>","#    And print errorMessage"],"line":32,"prefix":"And","index":13,"text":"match errorMessage == \"Device is already registered\""}}],"line":37,"description":"","durationMillis":1118.669701,"failed":false,"executorName":"main","name":"soap 1.2","startTime":1638622444693,"refId":"[1.1:37]","endTime":1638622446016,"exampleData":{"adminKey":"\"Admin@1212\"","authKey":"\"426d6608-4e36-4405-b59d-a0fb23311f11\"","hcpId":"172","hcpMemberId":"test","id":"\"doctor172-34\"","expected":"\"Device is already registered\""},"exampleIndex":0},{"sectionIndex":0,"stepResults":[{"result":{"nanos":527716,"millis":0.527716,"status":"passed"},"step":{"comments":["#    * url demoBaseUrl + '\/soap'","# this live url should work if you want to try this on your own"],"background":true,"line":6,"prefix":"*","index":0,"text":"url 'https:\/\/enathealthgate.nathealth.net:7002\/EClaimsWS\/services'"}},{"result":{"nanos":331240,"millis":0.33124,"status":"passed"},"step":{"line":9,"prefix":"Given","index":0,"text":"path '\/ClientManagement.ClientManagementHttpSoap12Endpoint\/'"}},{"result":{"nanos":2477329,"millis":2.477329,"status":"passed"},"step":{"line":10,"prefix":"And","index":1,"text":"def requestBody = read('soapRequest.xml')"}},{"result":{"nanos":102435,"millis":0.102435,"status":"passed"},"step":{"line":11,"prefix":"And","index":2,"text":"request requestBody"}},{"result":{"nanos":1329792,"millis":1.329792,"status":"passed"},"step":{"comments":["#    And set requestBody\/Envelope\/Body\/registerClient\/registerClient\/adminKey = <adminKey>"],"line":13,"prefix":"And","index":3,"text":"set requestBody\/\/Body\/\/registerClient\/adminKey = \"test\""}},{"result":{"nanos":1126553,"millis":1.126553,"status":"passed"},"step":{"line":14,"prefix":"And","index":4,"text":"set requestBody\/\/Body\/\/registerClient\/hcpId = 172"}},{"result":{"nanos":783366,"millis":0.783366,"status":"passed"},"step":{"line":15,"prefix":"*","index":5,"text":"def now = function(){ return java.lang.System.currentTimeMillis() }"}},{"result":{"nanos":2141727,"millis":2.141727,"status":"passed"},"step":{"line":16,"prefix":"*","index":6,"text":"def authKey = 'Test-' + now() + '-' + now()"}},{"result":{"nanos":935317,"millis":0.935317,"status":"passed"},"step":{"line":17,"prefix":"And","index":7,"text":"set requestBody\/\/Body\/\/registerClient\/authKey = authKey"}},{"result":{"nanos":870188,"millis":0.870188,"status":"passed"},"step":{"line":18,"prefix":"And","index":8,"text":"set requestBody\/\/Body\/\/registerClient\/publicKey = authKey"}},{"result":{"nanos":375803,"millis":0.375803,"status":"passed"},"step":{"comments":["#    And set requestBody\/\/Body\/\/registerClient\/id = <id> + now()","# soap is just an HTTP POST, so here we set the required header manually .."],"line":21,"prefix":"And","index":9,"text":"header Content-Type = 'application\/soap+xml; charset=utf-8'"}},{"result":{"nanos":61161495,"millis":61.161495,"status":"passed"},"step":{"comments":["# .. and then we use the 'method keyword' instead of 'soap action'"],"line":23,"prefix":"When","index":10,"text":"method post"},"stepLog":"14:54:06.039 request:\n1 > POST https:\/\/enathealthgate.nathealth.net:7002\/EClaimsWS\/services\/ClientManagement.ClientManagementHttpSoap12Endpoint\n1 > Content-Type: application\/soap+xml; charset=utf-8\n1 > Content-Length: 717\n1 > Host: enathealthgate.nathealth.net:7002\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/1.8.0_265)\n1 > Accept-Encoding: gzip,deflate\n<soap:Envelope xmlns:soap=\"http:\/\/www.w3.org\/2003\/05\/soap-envelope\" xmlns:ws=\"http:\/\/ws.eclaims.nathealth.com\" xmlns:xsd=\"http:\/\/req.ws.eclaims.nathealth.com\/xsd\">\n    <soap:Header\/>\n    <soap:Body>\n        <ws:registerClient>\n            <ws:registerClient>\n                <xsd:adminKey>test<\/xsd:adminKey>\n                <xsd:authKey>Test-1638622446035-1638622446035<\/xsd:authKey>\n                <xsd:hcpId>172<\/xsd:hcpId>\n                <xsd:hcpMemberId\/>\n                <xsd:id>doctor172-33<\/xsd:id>\n                <xsd:publicKey>Test-1638622446035-1638622446035<\/xsd:publicKey>\n                <xsd:versionNo\/>\n            <\/ws:registerClient>\n        <\/ws:registerClient>\n    <\/soap:Body>\n<\/soap:Envelope>\n\n14:54:06.097 response time in milliseconds: 58\n1 < 200\n1 < Date: Sat, 04 Dec 2021 12:52:30 GMT\n1 < Server: Apache\n1 < X-Powered-By: Undertow\/1\n1 < Content-Type: application\/soap+xml; action=\"urn:registerClientResponse\";charset=utf-8\n1 < Vary: Accept-Encoding\n1 < Keep-Alive: timeout=15, max=100\n1 < Connection: Keep-Alive\n1 < Transfer-Encoding: chunked\n<?xml version='1.0' encoding='utf-8'?><soapenv:Envelope xmlns:soapenv=\"http:\/\/www.w3.org\/2003\/05\/soap-envelope\"><soapenv:Header\/><soapenv:Body><ns:registerClientResponse xmlns:ns=\"http:\/\/ws.eclaims.nathealth.com\"><ns:return xmlns:ax231=\"http:\/\/req.ws.eclaims.nathealth.com\/xsd\" xmlns:ax233=\"http:\/\/resp.ws.eclaims.nathealth.com\/xsd\" xmlns:ax234=\"http:\/\/common.ws.eclaims.nathealth.com\/xsd\" xmlns:ax237=\"http:\/\/dto.ws.nathealth.com\/xsd\" xmlns:xsi=\"http:\/\/www.w3.org\/2001\/XMLSchema-instance\" xsi:type=\"ax233:RegisterClientResponse\"><ax233:errorCode>WS3021E<\/ax233:errorCode><ax233:errorMsg>Invalid admin key<\/ax233:errorMsg><ax233:success>false<\/ax233:success><ax233:visitFeeProcedures xsi:nil=\"true\"\/><\/ns:return><\/ns:registerClientResponse><\/soapenv:Body><\/soapenv:Envelope>\n"},{"result":{"nanos":7827,"millis":0.007827,"status":"passed"},"step":{"line":24,"prefix":"Then","index":11,"text":"status 200"}},{"result":{"nanos":1162986,"millis":1.162986,"status":"passed"},"step":{"comments":["# note how we focus only on the relevant part of the payload and read expected XML from a file","#    And match \/Envelope\/Body\/registerClientResponse\/return == read('soapExpected.xml')","#    And print response","#    * xml errorMessage = get response \/Envelope\/Body\/registerClientResponse\/return"],"line":29,"prefix":"*","index":12,"text":"def errorMessage = $response\/\/Body\/\/return\/errorMsg"}},{"result":{"nanos":1532006,"millis":1.532006,"status":"passed"},"step":{"comments":["#    And match \/Envelope\/Body\/registerClientResponse\/return\/errorMsg == <expected>","#    And print errorMessage"],"line":32,"prefix":"And","index":13,"text":"match errorMessage == \"Invalid admin key\""}}],"line":42,"description":"","durationMillis":74.86578,"failed":false,"tags":["testTag"],"executorName":"main","name":"soap 1.2","startTime":1638622446023,"refId":"[1.1:42]","endTime":1638622446102,"exampleData":{"adminKey":"\"test\"","authKey":"\"426d6608-4e36-4405-b59d-a0fb23311f11\"","hcpId":"172","hcpMemberId":"test","id":"\"doctor172-34\"","expected":"\"Invalid admin key\""},"exampleIndex":0}],"callDepth":0,"name":"test soap end point","description":"","resultDate":"2021-12-04 02:54:06 PM","durationMillis":1193.535481,"passedCount":2}